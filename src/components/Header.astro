---
/* src/components/Header.astro */
import Search from "@astrojs/starlight/components/Search.astro";

const navLinks = [
  { name: "Home", href: "/" },
  { name: "CIC Guide", href: "/cic-guide" },
  { name: "Support Services", href: "/support-services" },
];
---

<nav
  id="custom-nav"
  class="sticky top-0 w-full z-50 bg-white/90 backdrop-blur-md border-b border-transparent transition-all duration-300"
>
  <div
    class="max-w-[1400px] mx-auto px-6 h-16 flex justify-between items-center"
  >
    <a
      href="/"
      class="flex items-center gap-2 group no-underline text-black hover:text-black"
    >
      <div class="font-extrabold text-xl flex items-center">
        <img src="/book.png" alt="Book Logo" class="h-8 w-auto mr-2" />
        CIC Handbook
      </div>
    </a>

    <div class="hidden md:flex gap-8 items-center">
      {
        navLinks.map((link) => (
          <a
            href={link.href}
            class="text-gray-600 font-medium text-[0.95rem] hover:text-[#78081C] transition-colors no-underline"
          >
            {link.name}
          </a>
        ))
      }
    </div>

    <div class="flex items-center custom-search-wrapper">
      <Search />
    </div>
  </div>
</nav>

<script>
  // Handles the scroll effect (adding border/white background)
  const nav = document.getElementById("custom-nav");

  window.addEventListener("scroll", () => {
    if (window.scrollY > 20) {
      nav?.classList.add("bg-white", "border-gray-200", "shadow-sm");
      nav?.classList.remove("bg-white/90", "border-transparent");
    } else {
      nav?.classList.remove("bg-white", "border-gray-200", "shadow-sm");
      nav?.classList.add("bg-white/90", "border-transparent");
    }
  });
</script>

<style>
  /* Remove default Starlight link styles */
  a {
    text-decoration: none !important;
  }

  .custom-search-wrapper :global(button) {
    background-color: #78081c !important;
    color: white !important;
    border: none !important;
    border-radius: 9999px !important;
    padding: 0.5rem 1.25rem !important;
    font-size: 0.9rem !important;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.2s;
    box-shadow: 0 4px 6px -1px rgba(120, 8, 28, 0.3);
    height: auto !important;
    min-height: 40px !important;
  }

  .custom-search-wrapper :global(button:hover) {
    background-color: #5a0615 !important;
    transform: translateY(-1px);
    opacity: 1 !important;
  }

  .custom-search-wrapper :global(svg) {
    color: white !important;
  }

  .custom-search-wrapper :global(.pagefind-ui__search-input::placeholder) {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .custom-search-wrapper :global(kbd) {
    display: none !important;
  }
</style>
